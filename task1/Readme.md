# Разберем установку и настройку Apache Hadoop.

## ▎Шаг 1: Настройка SSH

Перед тем как перейти к установке Hadoop, важно настроить SSH для удаленного доступа между узлами. Это необходимо для того, чтобы Hadoop мог управлять своими компонентами.

1. Установите SSH:

   На большинстве дистрибутивов Linux SSH уже установлен. Если нет, вы можете установить его с помощью следующей команды:
```bash
sudo apt update
sudo apt install openssh-server
```   

2. Создайте SSH-ключи:

   Войдите под пользователем, который будет использоваться для работы с Hadoop (например, hadoopuser):
```bash
   su - hadoopuser
   ssh-keygen -t rsa -P '' -f ~/.ssh/id_rsa
```  

3. Добавьте публичный ключ в authorized_keys:

   Выполните следующую команду, чтобы добавить ваш публичный ключ в файл authorized_keys, что позволит вам подключаться к вашему узлу без пароля (также происходит и добавление внешних ключей сокомандников):
```bash
      cat ~/.ssh/id_rsa.pub >> ~/.ssh/authorized_keys
```   

4. Проверьте SSH-соединение:

   Попробуйте подключиться к localhost:
```bash
      ssh localhost
```   

   Если вы сможете подключиться без запроса пароля, настройка SSH выполнена успешно.

## ▎Шаг 2: Установка Hadoop

Теперь, когда SSH настроен, мы можем перейти к установке Hadoop. 

## ▎2.1: Jump Node (Master Node)

В первую очередь нужно войти, а значит чтобы подключиться к jump node, нужно сделать следующее:
```bash
ssh team@ip
```
Необходимо обеспечить взаимодействие между всеми узлами, и для безопасности создаем специального пользователя:
```bash
sudo adduser hadoop
```
А дальше производим операции для нового пользователя:
-- во-первых, мы входим в пользовтаеля hadoop
```bash
sudo -i -u hadoop
```
-- во-вторых, мы генерируем ключ для нашего нового пользователя:
```bash
ssh-keygen
```
-- в-третьих, мы сохраняем наш ключ на внешний носитель, а для этого выводим его на экран:
```bash
cat .ssh/id_ed25519.pub
```
Подготовительный этап завершился, поэтому непосредственно сама установка. Из-за необходимости ожидания скачивания, воспрользуемся сессионным менеджером:
```bash
tmux
```
Зайдя в котороый мы пишем команду по скачиванию дитрибутива
```bash
wget https://downloads.apache.org/hadoop/common/hadoop-3.x.x/hadoop-3.x.x.tar.gz
```
где .x.x - это версия дистрибутива на текущий день, для октября 2024 года это .4.0

И после этого выходим из сессионного менеджера.


